[![Luacheck](https://github.com/codi-hacks/space-race/actions/workflows/auto-lint.yml/badge.svg?branch=master)](https://github.com/codi-hacks/space-race/actions/workflows/auto-lint.yml)
[![Unit Tests](https://github.com/codi-hacks/space-race/actions/workflows/unit-tests.yml/badge.svg?branch=master)](https://github.com/codi-hacks/space-race/actions/workflows/unit-tests.yml)
[![Coverage Status](https://coveralls.io/repos/github/codi-hacks/space-race/badge.svg?branch=)](https://coveralls.io/github/codi-hacks/space-race?branch=)

# Spaceship Game!

<!-- Table of contents can be re-generated by running `npx doctoc README.md` -->
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Running](#running)
- [Development](#development)
  - [Architecture](#architecture)
  - [Linting](#linting)
  - [Docker](#docker)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

Use w/a/s/d to move laterally via velocity. Press shift and arrow keys to "teleport" laterally.

Use `a`/`d` to spin the ship left/right and `w`/`s` to boost forward/backward. Press `space` to brake.

Press `b` for debug information.

Press `p` to pause.

## Running

Install [love2D](https://love2d.org/) and run `love .` in the main directory. That's it!

Of course, this game is still in development, so please expect bugs.

## Development

### Architecture

This project is loosely based on the [Entity-Component-System](https://en.wikipedia.org/wiki/Entity_component_system) (ECS) architecture. Here is some of the jargon we use in the context of this project:

- **Entity** - These are described as tables (object) in the `entities/` folder, though strictly speaking the entities are the instances of these objects that exist during gameplay and are bound to the Box2D `World` singleton via its body, shape, and perhaps a fixture.
  - [**Factory functions**](https://en.wikipedia.org/wiki/Factory_method_pattern) - These are the functions returned by each "file" in the entity directory. The reason these return functions that return tables instead of just returning tables directly is because when we spawn any type of entity multiple times we want each table to be a unique copy and that's what functions do well. A "planet factory function" says it all... a function that's like a giant factory pumping out planets!
  - **Props** - In addition to returning table copies during entity spawning, factory functions can be passed in a "props" table to override some of the default aspects of an entity.
- **Components** - Components are functions that you attach to an entity table within the entity files. These can be either inline functions or defined in a separate "components" folder. In a game with lots of similar entities, the same component may be utilized between many types of entities.
- **Systems** - These are functions invoked at the top level of the game loop, having every entity passed through them. A system's job is to define what entities it is allowed to operate with and then proceed whenever it receives a match. Note that "System" is also the name of the [knife.system](https://github.com/airstruck/knife/blob/master/readme/system.md) library used on this project to define Systems. However the library can and may be utilized to define things that aren't strictly Systems in the ECS sense so there is potential for confusion there.
  - **Aspects** - These are essentially the key names attached to the entity table, but the term is useful in the context of the [System API](https://github.com/airstruck/knife/blob/master/readme/system.md#api)

### Linting

You can check your changes against [the linter](https://github.com/mpeterv/luacheck#readme) in realtime by installing a [luacheck plugin](https://github.com/mpeterv/luacheck#editor-support) for your editor or running `luacheck .` command (assuming you have luacheck installed).

### Docker

Alternatively, you can run the linter as well as the ([busted](https://olivinelabs.com/busted)) unit tests if you have Docker installed.
Once docker is installed and running, simply invoke one of the `make` commands:

```sh
make test  # Run linter and unit tests
make test-lint  # Just luacheck
make test-unit  # Just busted
```
